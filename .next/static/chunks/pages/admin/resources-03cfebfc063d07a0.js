(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[47],{3205:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/resources",function(){return a(817)}])},817:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var s=a(5893),n=a(7294),l=a(7066),c=a(1163);let r="http://localhost:4000";function o(e){let{session:t}=e,[a,o]=(0,n.useState)([]),[u,i]=(0,n.useState)(""),[d,h]=(0,n.useState)(""),[p,m]=(0,n.useState)(""),[x,f]=(0,n.useState)(null),[N,b]=(0,n.useState)(null),g=(0,c.useRouter)();async function j(){let e=localStorage.getItem("backend_token"),t=await l.Z.get("".concat(r,"/api/resources"),{headers:{Authorization:"Bearer ".concat(e)}});o(t.data)}async function w(e){e.preventDefault();let t=localStorage.getItem("backend_token");x?await l.Z.put("".concat(r,"/api/resources/").concat(x.id),{name:u,unit:d,rate:parseFloat(p)},{headers:{Authorization:"Bearer ".concat(t)}}):await l.Z.post("".concat(r,"/api/resources"),{name:u,unit:d,rate:parseFloat(p)},{headers:{Authorization:"Bearer ".concat(t)}}),i(""),h(""),m(""),f(null),j()}async function _(e){let t=localStorage.getItem("backend_token");await l.Z.delete("".concat(r,"/api/resources/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}}),j()}return(0,n.useEffect)(()=>{let e=localStorage.getItem("user_role");"admin"!==e?g.push("/"):(b(e),j())},[g]),t&&"admin"===N?(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h1",{className:"text-xl font-bold mb-4",children:"Manage Resources"}),(0,s.jsxs)("form",{onSubmit:w,className:"space-y-2 mb-4",children:[(0,s.jsx)("input",{type:"text",placeholder:"Resource Name",className:"border p-2 w-full",value:u,onChange:e=>i(e.target.value)}),(0,s.jsx)("input",{type:"text",placeholder:"Unit (e.g. day, bag, hour)",className:"border p-2 w-full",value:d,onChange:e=>h(e.target.value)}),(0,s.jsx)("input",{type:"number",placeholder:"Rate",className:"border p-2 w-full",value:p,onChange:e=>m(e.target.value)}),(0,s.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded",type:"submit",children:x?"Update Resource":"Add Resource"})]}),(0,s.jsxs)("table",{className:"min-w-full bg-white",children:[(0,s.jsx)("thead",{className:"bg-gray-200",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"p-2 text-left",children:"Name"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Unit"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Rate"}),(0,s.jsx)("th",{className:"p-2 text-left"})]})}),(0,s.jsx)("tbody",{children:a.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"p-2",children:e.name}),(0,s.jsx)("td",{className:"p-2",children:e.unit}),(0,s.jsx)("td",{className:"p-2",children:e.rate}),(0,s.jsxs)("td",{className:"p-2 space-x-2",children:[(0,s.jsx)("button",{onClick:()=>{i(e.name),h(e.unit),m(e.rate),f(e)},className:"text-blue-600 underline",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>_(e.id),className:"text-red-600 underline",children:"Delete"})]})]},e.id))})]})]}):(0,s.jsx)("div",{children:"Loading..."})}}},function(e){e.O(0,[66,774,888,179],function(){return e(e.s=3205)}),_N_E=e.O()}]);